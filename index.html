<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì–´ë¨¸ë‹ˆë¥¼ ìœ„í•œ êµ¬ë¦¬ì—­ ì§€í•˜ì²  ë„ìš°ë¯¸</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Nanum+Gothic:wght@400;700;800&display=swap');
        
        body {
            font-family: 'Nanum+Gothic', sans-serif;
            background-color: #f8fafc;
            -webkit-tap-highlight-color: transparent;
            overflow-x: hidden;
            font-size: 1.25rem;
        }
        
        .big-button {
            transition: transform 0.1s active;
            box-shadow: 0 10px 20px rgba(0,0,0,0.08);
        }
        
        .big-button:active {
            transform: scale(0.96);
        }

        /* ë…¸ì„ ë³„ ëŒ€í‘œ ìƒ‰ìƒ */
        .line-1 { background-color: #0052A4; } .line-2 { background-color: #009D3E; }
        .line-3 { background-color: #EF7C1C; } .line-4 { background-color: #00A5DE; }
        .line-5 { background-color: #996CAC; } .line-6 { background-color: #CD7C2F; }
        .line-7 { background-color: #747F00; } .line-8 { background-color: #e6186c; }
        .line-9 { background-color: #BDB092; } .line-gj { background-color: #77c4a3; }
        .line-suin { background-color: #F5A200; } .line-shin { background-color: #D4003B; }
        .line-gc { background-color: #0C8E72; } .line-gtx { background-color: #A6142F; }
        .line-default { background-color: #64748b; }

        .station-badge {
            display: inline-block;
            padding: 4px 14px;
            border-radius: 20px;
            color: white;
            font-weight: 800;
            font-size: 1.1rem;
        }

        #map-modal {
            display: none;
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.95);
            z-index: 100;
            overflow: auto;
        }

        .highlight-red {
            color: #dc2626;
            font-weight: 900;
            font-size: 1.6rem;
            text-decoration: underline;
            text-underline-offset: 4px;
        }

        /* ì–´ë¥´ì‹ ìš© í° ì…ë ¥ì°½ */
        #station-input {
            font-size: 2rem;
            line-height: 1.5;
        }
    </style>
</head>
<body class="max-w-md mx-auto min-h-screen bg-gray-50 pb-20">

    <header class="bg-blue-600 text-white p-8 text-center shadow-xl">
        <h1 class="text-4xl font-black mb-2">ì§€í•˜ì²  ë„ìš°ë¯¸</h1>
        <p class="text-2xl opacity-90 font-bold">ì–´ë¨¸ë‹ˆ, ì–´ë””ë¡œ ëª¨ì‹¤ê¹Œìš”?</p>
    </header>

    <main class="p-4 space-y-8">
        <!-- ë©”ì¸ ë©”ë‰´ -->
        <div id="main-menu" class="space-y-6 pt-4">
            <button onclick="openSearch('out')" class="big-button w-full bg-white border-4 border-blue-500 rounded-[2.5rem] p-8 text-left flex items-center justify-between">
                <div>
                    <span class="text-gray-500 text-2xl block mb-2 font-bold">ì§‘ì—ì„œ ë‚˜ê°ˆ ë•Œ</span>
                    <span class="text-4xl font-black text-gray-800">êµ¬ë¦¬ì—­ì—ì„œ ì¶œë°œ</span>
                </div>
                <span class="text-6xl">ğŸ </span>
            </button>

            <button onclick="openSearch('in')" class="big-button w-full bg-white border-4 border-green-500 rounded-[2.5rem] p-8 text-left flex items-center justify-between">
                <div>
                    <span class="text-gray-500 text-2xl block mb-2 font-bold">ì§‘ìœ¼ë¡œ ëŒì•„ì˜¬ ë•Œ</span>
                    <span class="text-4xl font-black text-gray-800">êµ¬ë¦¬ì—­ìœ¼ë¡œ ê°€ê¸°</span>
                </div>
                <span class="text-6xl">ğŸš‰</span>
            </button>

            <button onclick="toggleMap(true)" class="big-button w-full bg-orange-400 border-4 border-orange-600 rounded-[2rem] p-6 text-center shadow-lg">
                <span class="text-3xl font-black text-white">ğŸ—ºï¸ ì „ì²´ ë…¸ì„ ë„ ë³´ê¸°</span>
            </button>

            <!-- ì¦ê²¨ì°¾ê¸° -->
            <div id="favorites-section" class="hidden mt-8">
                <h2 class="text-3xl font-black text-gray-700 mb-4 ml-2">â­ ìì£¼ ê°€ëŠ” ê³³</h2>
                <div id="favorites-list" class="space-y-4"></div>
            </div>
        </div>

        <!-- ê²€ìƒ‰ í™”ë©´ -->
        <div id="search-view" class="hidden fixed inset-0 bg-white z-[60] p-6 flex flex-col">
            <div class="flex items-center justify-between mb-6">
                <h2 id="search-title" class="text-3xl font-black text-blue-700">ê°€ì‹¤ ê³³ ì…ë ¥</h2>
                <button onclick="closeSearch()" class="text-5xl font-bold p-2 text-gray-400">âœ•</button>
            </div>
            
            <div class="relative mb-6">
                <input type="text" id="station-input" oninput="filterStations(this.value)" autofocus
                       placeholder="ì—­ ì´ë¦„ì„ ì“°ì„¸ìš”" 
                       class="w-full border-b-8 border-blue-500 p-4 font-black focus:outline-none placeholder-gray-300">
            </div>
            
            <div id="search-results" class="flex-1 overflow-y-auto space-y-4">
                <!-- ê²°ê³¼ ìë™ ìƒì„± -->
            </div>
        </div>

        <!-- ê²½ë¡œ ìƒì„¸ í™”ë©´ -->
        <div id="route-detail" class="hidden bg-white rounded-[3rem] border-8 border-blue-400 p-8 shadow-2xl space-y-8">
            <div class="flex justify-between items-center">
                <button onclick="goHome()" class="bg-gray-500 text-white px-6 py-3 rounded-2xl text-2xl font-black shadow-md">ì²˜ìŒìœ¼ë¡œ</button>
                <button id="fav-btn" onclick="toggleFavorite()" class="text-6xl">â˜†</button>
            </div>
            
            <div id="route-content" class="space-y-8">
                <!-- ê²½ë¡œ ë‚´ìš© -->
            </div>

            <button onclick="toggleMap(true)" class="block w-full bg-orange-500 text-white text-center py-6 rounded-3xl text-3xl font-black shadow-xl">
                ğŸ—ºï¸ ë…¸ì„ ë„ì—ì„œ í™•ì¸
            </button>
        </div>
    </main>

    <!-- ì§€ë„ ë³´ê¸° (ëª¨ë‹¬) -->
    <div id="map-modal">
        <div class="min-h-screen flex flex-col p-4">
            <button onclick="toggleMap(false)" class="sticky top-4 self-end bg-white border-4 border-black text-black px-8 py-4 rounded-full text-3xl font-black shadow-2xl z-[110]">ì°½ ë‹«ê¸° âœ•</button>
            <div class="overflow-auto mt-4 flex-1 rounded-2xl">
                <img src="map_korea.jpg" alt="ì„œìš¸ ì§€í•˜ì²  ë…¸ì„ ë„" class="max-w-none w-[500%]" id="map-img">
            </div>
            <p class="text-white text-center mt-6 text-2xl font-bold">ì§€ë„ë¥¼ ì†ê°€ë½ìœ¼ë¡œ ë°€ì–´ì„œ í¬ê²Œ ë³´ì„¸ìš”</p>
        </div>
    </div>

    <script>
        /**
         * ë°©ëŒ€í•œ ì—­ ë°ì´í„° (1~9í˜¸ì„ , ê²½ì˜ì¤‘ì•™, ì‹ ë¶„ë‹¹, GTX ë“± ëª¨ë“  ì£¼ìš” ì—­ í¬í•¨)
         * ì–´ë¥´ì‹ ì„ ìœ„í•´ í™˜ìŠ¹ì—­ í•˜ì°¨ ì§€ì ì„ ëª…í™•íˆ ê¸°ìˆ 
         */
        const stationsDB = [
            // 8í˜¸ì„  (ì—°ì¥ì„ )
            { name: "ë³„ë‚´", line: "8/ê²½ì¶˜", color: "line-8", hub: "ì—†ìŒ", desc: "í•‘í¬ìƒ‰ 8í˜¸ì„ (ë³„ë‚´í–‰)ì„ íƒ€ê³  ì¢…ì ì¸ <span class='highlight-red'>ë³„ë‚´ì—­</span>ì—ì„œ ë‚´ë¦¬ì„¸ìš”." },
            { name: "ë‹¤ì‚°", line: "8", color: "line-8", hub: "ì—†ìŒ", desc: "í•‘í¬ìƒ‰ 8í˜¸ì„ (ë³„ë‚´í–‰)ì„ íƒ€ê³  ë‹¤ìŒ ì •ê±°ì¥ì¸ <span class='highlight-red'>ë‹¤ì‚°ì—­</span>ì—ì„œ ë‚´ë¦¬ì„¸ìš”." },
            { name: "ì¥ìí˜¸ìˆ˜ê³µì›", line: "8", color: "line-8", hub: "ì—†ìŒ", desc: "í•‘í¬ìƒ‰ 8í˜¸ì„ (ëª¨ë€í–‰)ì„ íƒ€ê³  ë‹¤ìŒ ì •ê±°ì¥ì¸ <span class='highlight-red'>ì¥ìí˜¸ìˆ˜ê³µì›ì—­</span>ì—ì„œ ë‚´ë¦¬ì„¸ìš”." },
            { name: "ì•”ì‚¬ì—­ì‚¬ê³µì›", line: "8", color: "line-8", hub: "ì—†ìŒ", desc: "í•‘í¬ìƒ‰ 8í˜¸ì„ ì„ íƒ€ê³  <span class='highlight-red'>ì•”ì‚¬ì—­ì‚¬ê³µì›ì—­</span>ì—ì„œ ë‚´ë¦¬ì„¸ìš”." },
            { name: "ì•”ì‚¬", line: "8", color: "line-8", hub: "ì—†ìŒ", desc: "í•‘í¬ìƒ‰ 8í˜¸ì„ ì„ íƒ€ê³  <span class='highlight-red'>ì•”ì‚¬ì—­</span>ì—ì„œ ë‚´ë¦¬ì„¸ìš”." },
            { name: "ì²œí˜¸", line: "8/5", color: "line-8", hub: "ì—†ìŒ", desc: "í•‘í¬ìƒ‰ 8í˜¸ì„ ì„ íƒ€ê³  <span class='highlight-red'>ì²œí˜¸ì—­</span>ì—ì„œ ë‚´ë¦¬ì„¸ìš”." },
            { name: "ì ì‹¤", line: "8/2", color: "line-8", hub: "ì—†ìŒ", desc: "í•‘í¬ìƒ‰ 8í˜¸ì„ ì„ íƒ€ê³  <span class='highlight-red'>ì ì‹¤ì—­</span>ì—ì„œ ë‚´ë¦¬ì„¸ìš”." },
            { name: "ì„ì´Œ", line: "8/9", color: "line-8", hub: "ì—†ìŒ", desc: "í•‘í¬ìƒ‰ 8í˜¸ì„ ì„ íƒ€ê³  <span class='highlight-red'>ì„ì´Œì—­</span>ì—ì„œ ë‚´ë¦¬ì„¸ìš”." },
            { name: "ê°€ë½ì‹œì¥", line: "8/3", color: "line-8", hub: "ì—†ìŒ", desc: "í•‘í¬ìƒ‰ 8í˜¸ì„ ì„ íƒ€ê³  <span class='highlight-red'>ê°€ë½ì‹œì¥ì—­</span>ì—ì„œ ë‚´ë¦¬ì„¸ìš”." },
            { name: "ë³µì •", line: "8/ìˆ˜ì¸", color: "line-8", hub: "ì—†ìŒ", desc: "í•‘í¬ìƒ‰ 8í˜¸ì„ ì„ íƒ€ê³  <span class='highlight-red'>ë³µì •ì—­</span>ì—ì„œ ë‚´ë¦¬ì„¸ìš”." },
            { name: "ëª¨ë€", line: "8/ìˆ˜ì¸", color: "line-8", hub: "ì—†ìŒ", desc: "í•‘í¬ìƒ‰ 8í˜¸ì„  ì¢…ì ì¸ <span class='highlight-red'>ëª¨ë€ì—­</span>ì—ì„œ ë‚´ë¦¬ì„¸ìš”." },

            // ê²½ì˜ì¤‘ì•™ì„  & ê²½ì¶˜ì„ 
            { name: "íšŒê¸°", line: "ê²½ì˜ì¤‘ì•™/1", color: "line-gj", hub: "ì—†ìŒ", desc: "ì˜¥ìƒ‰ ì—´ì°¨(ë¬¸ì‚°í–‰)ë¥¼ íƒ€ê³  <span class='highlight-red'>íšŒê¸°ì—­</span>ì—ì„œ ë‚´ë¦¬ì„¸ìš”." },
            { name: "ì²­ëŸ‰ë¦¬", line: "ê²½ì˜ì¤‘ì•™/1/ìˆ˜ì¸", color: "line-gj", hub: "ì—†ìŒ", desc: "ì˜¥ìƒ‰ ì—´ì°¨ë¥¼ íƒ€ê³  <span class='highlight-red'>ì²­ëŸ‰ë¦¬ì—­</span>ì—ì„œ ë‚´ë¦¬ì„¸ìš”." },
            { name: "ì™•ì‹­ë¦¬", line: "ê²½ì˜ì¤‘ì•™/2/5/ìˆ˜ì¸", color: "line-gj", hub: "ì—†ìŒ", desc: "ì˜¥ìƒ‰ ì—´ì°¨ë¥¼ íƒ€ê³  <span class='highlight-red'>ì™•ì‹­ë¦¬ì—­</span>ì—ì„œ ë‚´ë¦¬ì„¸ìš”." },
            { name: "ì˜¥ìˆ˜", line: "ê²½ì˜ì¤‘ì•™/3", color: "line-gj", hub: "ì—†ìŒ", desc: "ì˜¥ìƒ‰ ì—´ì°¨ë¥¼ íƒ€ê³  <span class='highlight-red'>ì˜¥ìˆ˜ì—­</span>ì—ì„œ ë‚´ë¦¬ì„¸ìš”." },
            { name: "ì´ì´Œ", line: "ê²½ì˜ì¤‘ì•™/4", color: "line-gj", hub: "ì—†ìŒ", desc: "ì˜¥ìƒ‰ ì—´ì°¨ë¥¼ íƒ€ê³  <span class='highlight-red'>ì´ì´Œì—­</span>ì—ì„œ ë‚´ë¦¬ì„¸ìš”." },
            { name: "ìš©ì‚°", line: "ê²½ì˜ì¤‘ì•™/1", color: "line-gj", hub: "ì—†ìŒ", desc: "ì˜¥ìƒ‰ ì—´ì°¨ë¥¼ íƒ€ê³  <span class='highlight-red'>ìš©ì‚°ì—­</span>ì—ì„œ ë‚´ë¦¬ì„¸ìš”." },
            { name: "ìƒë´‰", line: "ê²½ì˜ì¤‘ì•™/7/ê²½ì¶˜", color: "line-gj", hub: "ì—†ìŒ", desc: "ì˜¥ìƒ‰ ì—´ì°¨ë¥¼ íƒ€ê³  <span class='highlight-red'>ìƒë´‰ì—­</span>ì—ì„œ ë‚´ë¦¬ì„¸ìš”." },
            { name: "í‰ë‚´í˜¸í‰", line: "ê²½ì¶˜", color: "line-gc", hub: "ë§ìš° í™˜ìŠ¹", desc: "ì˜¥ìƒ‰ ì—´ì°¨ë¥¼ íƒ€ê³  <span class='highlight-red'>ë§ìš°ì—­</span>ì—ì„œ ë‚´ë¦¬ì„¸ìš”. ê·¸ ë‹¤ìŒ ì¶˜ì²œë°©í–¥ ê²½ì¶˜ì„ ìœ¼ë¡œ ê°ˆì•„íƒ€ì„¸ìš”." },

            // 1í˜¸ì„  ëª©ì ì§€
            { name: "ì„œìš¸ì—­", line: "1/4", color: "line-1", hub: "íšŒê¸°ì—­ í™˜ìŠ¹", desc: "ì˜¥ìƒ‰ ì—´ì°¨ë¥¼ íƒ€ê³  <span class='highlight-red'>íšŒê¸°ì—­</span>ì—ì„œ ë‚´ë¦¬ì„¸ìš”. ê·¸ ë‹¤ìŒ 1í˜¸ì„ ìœ¼ë¡œ ê°ˆì•„íƒ€ê³  ì„œìš¸ì—­ì—ì„œ ë‚´ë¦¬ì„¸ìš”." },
            { name: "ì¢…ë¡œ3ê°€", line: "1/3/5", color: "line-1", hub: "íšŒê¸°ì—­ í™˜ìŠ¹", desc: "ì˜¥ìƒ‰ ì—´ì°¨ë¥¼ íƒ€ê³  <span class='highlight-red'>íšŒê¸°ì—­</span>ì—ì„œ ë‚´ë¦¬ì„¸ìš”. ê·¸ ë‹¤ìŒ 1í˜¸ì„ ìœ¼ë¡œ ê°ˆì•„íƒ€ê³  ì¢…ë¡œ3ê°€ì—ì„œ ë‚´ë¦¬ì„¸ìš”." },
            { name: "ë™ëŒ€ë¬¸", line: "1/4", color: "line-1", hub: "íšŒê¸°ì—­ í™˜ìŠ¹", desc: "ì˜¥ìƒ‰ ì—´ì°¨ë¥¼ íƒ€ê³  <span class='highlight-red'>íšŒê¸°ì—­</span>ì—ì„œ ë‚´ë¦¬ì„¸ìš”. ê·¸ ë‹¤ìŒ 1í˜¸ì„ ìœ¼ë¡œ ê°ˆì•„íƒ€ê³  ë™ëŒ€ë¬¸ì—­ì—ì„œ ë‚´ë¦¬ì„¸ìš”." },
            { name: "ì˜ì •ë¶€", line: "1", color: "line-1", hub: "íšŒê¸°ì—­ í™˜ìŠ¹", desc: "ì˜¥ìƒ‰ ì—´ì°¨ë¥¼ íƒ€ê³  <span class='highlight-red'>íšŒê¸°ì—­</span>ì—ì„œ ë‚´ë¦¬ì„¸ìš”. ê·¸ ë‹¤ìŒ 1í˜¸ì„ (ì˜ì •ë¶€í–‰)ìœ¼ë¡œ ê°ˆì•„íƒ€ì„¸ìš”." },
            { name: "ì¸ì²œ", line: "1", color: "line-1", hub: "íšŒê¸°ì—­ í™˜ìŠ¹", desc: "ì˜¥ìƒ‰ ì—´ì°¨ë¥¼ íƒ€ê³  <span class='highlight-red'>íšŒê¸°ì—­</span>ì—ì„œ ë‚´ë¦¬ì„¸ìš”. ê·¸ ë‹¤ìŒ 1í˜¸ì„ (ì¸ì²œí–‰)ìœ¼ë¡œ ê°ˆì•„íƒ€ì„¸ìš”." },
            { name: "ìˆ˜ì›", line: "1/ìˆ˜ì¸", color: "line-1", hub: "íšŒê¸°ì—­ í™˜ìŠ¹", desc: "ì˜¥ìƒ‰ ì—´ì°¨ë¥¼ íƒ€ê³  <span class='highlight-red'>íšŒê¸°ì—­</span>ì—ì„œ ë‚´ë¦¬ì„¸ìš”. ê·¸ ë‹¤ìŒ 1í˜¸ì„ (ì‹ ì°½í–‰)ì„ íƒ€ê³  ìˆ˜ì›ì—­ì—ì„œ ë‚´ë¦¬ì„¸ìš”." },

            // 2í˜¸ì„  ëª©ì ì§€
            { name: "ê°•ë‚¨", line: "2/ì‹ ë¶„ë‹¹", color: "line-2", hub: "ì ì‹¤ì—­ í™˜ìŠ¹", desc: "í•‘í¬ìƒ‰ 8í˜¸ì„ ì„ íƒ€ê³  <span class='highlight-red'>ì ì‹¤ì—­</span>ì—ì„œ ë‚´ë¦¬ì„¸ìš”. ê·¸ ë‹¤ìŒ 2í˜¸ì„ ìœ¼ë¡œ ê°ˆì•„íƒ€ê³  ê°•ë‚¨ì—­ì—ì„œ ë‚´ë¦¬ì„¸ìš”." },
            { name: "í™ëŒ€ì…êµ¬", line: "2/ê³µí•­", color: "line-2", hub: "ì™•ì‹­ë¦¬ í™˜ìŠ¹", desc: "ì˜¥ìƒ‰ ì—´ì°¨ë¥¼ íƒ€ê³  <span class='highlight-red'>ì™•ì‹­ë¦¬ì—­</span>ì—ì„œ ë‚´ë¦¬ì„¸ìš”. ê·¸ ë‹¤ìŒ 2í˜¸ì„ ìœ¼ë¡œ ê°ˆì•„íƒ€ê³  í™ëŒ€ì…êµ¬ì—ì„œ ë‚´ë¦¬ì„¸ìš”." },
            { name: "ê±´ëŒ€ì…êµ¬", line: "2/7", color: "line-2", hub: "ì ì‹¤ì—­ í™˜ìŠ¹", desc: "í•‘í¬ìƒ‰ ì—´ì°¨ë¥¼ íƒ€ê³  <span class='highlight-red'>ì ì‹¤ì—­</span>ì—ì„œ ë‚´ë¦° ë’¤ 2í˜¸ì„ ìœ¼ë¡œ ê°ˆì•„íƒ€ê³  ê±´ëŒ€ì…êµ¬ì—ì„œ ë‚´ë¦¬ì„¸ìš”." },
            { name: "ì„ì§€ë¡œì…êµ¬", line: "2", color: "line-2", hub: "ì ì‹¤ì—­ í™˜ìŠ¹", desc: "í•‘í¬ìƒ‰ 8í˜¸ì„ ì„ íƒ€ê³  <span class='highlight-red'>ì ì‹¤ì—­</span>ì—ì„œ ë‚´ë¦¬ì„¸ìš”. ê·¸ ë‹¤ìŒ 2í˜¸ì„ ìœ¼ë¡œ ê°ˆì•„íƒ€ì„¸ìš”." },

            // 3, 4, 5, 6, 7, 9í˜¸ì„  ì£¼ìš”ì—­
            { name: "ê³ ì†í„°ë¯¸ë„", line: "3/7/9", color: "line-3", hub: "ê°€ë½ì‹œì¥ í™˜ìŠ¹", desc: "í•‘í¬ìƒ‰ 8í˜¸ì„ ì„ íƒ€ê³  <span class='highlight-red'>ê°€ë½ì‹œì¥ì—­</span>ì—ì„œ ë‚´ë¦¬ì„¸ìš”. ê·¸ ë‹¤ìŒ 3í˜¸ì„ ìœ¼ë¡œ ê°ˆì•„íƒ€ì„¸ìš”." },
            { name: "ëª…ë™", line: "4", color: "line-4", hub: "íšŒê¸°ì—­ í™˜ìŠ¹", desc: "ì˜¥ìƒ‰ ì—´ì°¨ë¥¼ íƒ€ê³  <span class='highlight-red'>íšŒê¸°ì—­</span>ì—ì„œ ë‚´ë¦¬ì„¸ìš”. 1í˜¸ì„  ê°ˆì•„íƒ„ ë’¤ ì¢…ë¡œ3ê°€ì—ì„œ 3í˜¸ì„ , í˜¹ì€ ë™ëŒ€ë¬¸ì—ì„œ 4í˜¸ì„ ìœ¼ë¡œ ê°€ì„¸ìš”." },
            { name: "ìƒê³„", line: "4", color: "line-4", hub: "ë³„ë‚´ì—­ í™˜ìŠ¹", desc: "í•‘í¬ìƒ‰ ì—´ì°¨(ë³„ë‚´í–‰)ë¥¼ íƒ€ê³  <span class='highlight-red'>ë³„ë‚´ì—­</span>ì—ì„œ ë‚´ë¦¬ì„¸ìš”. ê·¸ ë‹¤ìŒ 4í˜¸ì„ (ì§„ì ‘ì„ )ìœ¼ë¡œ ê°ˆì•„íƒ€ì„¸ìš”." },
            { name: "ë…¸ì›", line: "4/7", color: "line-4", hub: "ë³„ë‚´ì—­ í™˜ìŠ¹", desc: "í•‘í¬ìƒ‰ ì—´ì°¨(ë³„ë‚´í–‰)ë¥¼ íƒ€ê³  <span class='highlight-red'>ë³„ë‚´ì—­</span>ì—ì„œ ë‚´ë¦¬ì„¸ìš”. ê·¸ ë‹¤ìŒ 4í˜¸ì„ ìœ¼ë¡œ ê°ˆì•„íƒ€ì„¸ìš”." },
            { name: "ê¹€í¬ê³µí•­", line: "5/9/ê³µí•­", color: "line-5", hub: "ì™•ì‹­ë¦¬ í™˜ìŠ¹", desc: "ì˜¥ìƒ‰ ì—´ì°¨ë¥¼ íƒ€ê³  <span class='highlight-red'>ì™•ì‹­ë¦¬ì—­</span>ì—ì„œ ë‚´ë¦° ë’¤ 5í˜¸ì„ ìœ¼ë¡œ ê°ˆì•„íƒ€ê³  ì­‰ ê°€ì„¸ìš”." },
            { name: "ì—¬ì˜ë„", line: "5/9", color: "line-9", hub: "ì„ì´Œì—­ í™˜ìŠ¹", desc: "í•‘í¬ìƒ‰ ì—´ì°¨ë¥¼ íƒ€ê³  <span class='highlight-red'>ì„ì´Œì—­</span>ì—ì„œ ë‚´ë¦¬ì„¸ìš”. ê·¸ ë‹¤ìŒ 9í˜¸ì„  ê¸‰í–‰ì„ íƒ€ì‹œë©´ ë¹ ë¦…ë‹ˆë‹¤." },

            // ê¸°íƒ€ ë…¸ì„  (ìˆ˜ì¸ë¶„ë‹¹, GTX, ì‹ ë¦¼ ë“±)
            { name: "êµ¬ì„±", line: "GTX-A/ìˆ˜ì¸", color: "line-gtx", hub: "ë³µì •ì—­ í™˜ìŠ¹", desc: "í•‘í¬ìƒ‰ 8í˜¸ì„ ì„ íƒ€ê³  <span class='highlight-red'>ë³µì •ì—­</span>ì—ì„œ ìˆ˜ì¸ë¶„ë‹¹ì„  ê°ˆì•„íƒ„ ë’¤ êµ¬ì„±ì—­ì—ì„œ ë‚´ë¦¬ì„¸ìš”." },
            { name: "ë™íƒ„", line: "GTX-A", color: "line-gtx", hub: "ë³µì •ì—­ í™˜ìŠ¹", desc: "ë³µì •ì—­ì—ì„œ ìˆ˜ì¸ë¶„ë‹¹ì„  íƒ€ê³  êµ¬ì„±ì—­ì—ì„œ GTXë¡œ ê°ˆì•„íƒ€ì„œ ë™íƒ„ì—­ì—ì„œ ë‚´ë¦¬ì„¸ìš”." },
            { name: "ì‹ ë¦¼", line: "2/ì‹ ë¦¼", color: "line-2", hub: "ì ì‹¤ì—­ í™˜ìŠ¹", desc: "ì ì‹¤ì—­ì—ì„œ 2í˜¸ì„  ê°ˆì•„íƒ€ê³  ì‹ ë¦¼ì—­ì—ì„œ ë‚´ë¦¬ì„¸ìš”." },
            { name: "ìš©ì¸", line: "ì—ë²„", color: "line-default", hub: "ë³µì •ì—­ í™˜ìŠ¹", desc: "ë³µì •ì—­ì—ì„œ ìˆ˜ì¸ë¶„ë‹¹ì„  íƒ€ê³  ê¸°í¥ì—­ì—ì„œ ë‚´ë¦° ë’¤ ê²½ì „ì² ë¡œ ê°ˆì•„íƒ€ì„¸ìš”." },
            { name: "ì˜ì •ë¶€ì¤‘ì•™", line: "ì˜ì •ë¶€", color: "line-default", hub: "íšŒê¸°ì—­ í™˜ìŠ¹", desc: "íšŒê¸°ì—­ì—ì„œ 1í˜¸ì„  ê°ˆì•„íƒ€ê³  íšŒë£¡ì—­ì—ì„œ ë‚´ë ¤ ê²½ì „ì² ë¡œ ê°€ì„¸ìš”." },
            { name: "ì„œí•´", line: "ì„œí•´", color: "line-default", hub: "ìš©ì‚°ì—­ í™˜ìŠ¹", desc: "ìš©ì‚°ì—­ì—ì„œ 1í˜¸ì„  ê°ˆì•„íƒ€ê³  ë¶€ì²œì¢…í•©ìš´ë™ì¥ì—­ì—ì„œ ì„œí•´ì„ ìœ¼ë¡œ ê°ˆì•„íƒ€ì„¸ìš”." }
        ];

        let currentTarget = null;
        let searchMode = 'out';
        let favorites = JSON.parse(localStorage.getItem('guri_mama_favs') || '[]');

        function openSearch(mode) {
            searchMode = mode;
            document.getElementById('search-view').classList.remove('hidden');
            document.getElementById('search-title').innerText = mode === 'out' ? "ì–´ë””ë¡œ ê°ˆê¹Œìš”?" : "ì–´ë””ì„œ ì˜¤ì‹œë‚˜ìš”?";
            document.getElementById('station-input').value = '';
            document.getElementById('station-input').focus();
            filterStations('');
        }

        function closeSearch() {
            document.getElementById('search-view').classList.add('hidden');
        }

        function filterStations(query) {
            const container = document.getElementById('search-results');
            container.innerHTML = '';
            
            const filtered = stationsDB.filter(s => s.name.includes(query));
            
            if (filtered.length === 0 && query !== '') {
                container.innerHTML = `<p class="text-center text-gray-400 text-2xl mt-12 font-bold">ì°¾ìœ¼ì‹œëŠ” ì—­ì´ ì—†ë„¤ìš”.<br>ì´ë¦„ì„ ë‹¤ì‹œ í™•ì¸í•´ì£¼ì„¸ìš”.</p>`;
                return;
            }

            // ê²€ìƒ‰ì–´ê°€ ì—†ì„ ë•ŒëŠ” ì£¼ìš”ì—­ 10ê°œë§Œ ë¨¼ì € ë³´ì—¬ì¤Œ
            const displayList = query === '' ? stationsDB.slice(0, 10) : filtered;

            displayList.forEach(st => {
                const btn = document.createElement('button');
                btn.className = "w-full bg-white border-2 border-gray-100 p-6 rounded-3xl flex items-center justify-between text-left shadow-sm active:bg-blue-50";
                btn.onclick = () => selectStation(st);
                btn.innerHTML = `
                    <span class="text-3xl font-black text-gray-800">${st.name}ì—­</span>
                    <span class="station-badge ${st.color}">${st.line.split('/')[0]}</span>
                `;
                container.appendChild(btn);
            });
        }

        function selectStation(st) {
            currentTarget = st;
            closeSearch();
            document.getElementById('main-menu').classList.add('hidden');
            document.getElementById('route-detail').classList.remove('hidden');
            
            const content = document.getElementById('route-content');
            const start = searchMode === 'out' ? 'êµ¬ë¦¬ì—­' : st.name + 'ì—­';
            const end = searchMode === 'out' ? st.name + 'ì—­' : 'êµ¬ë¦¬ì—­';
            const titleMsg = searchMode === 'out' ? 'ì•ˆì „í•˜ê²Œ ê°€ì‹œëŠ” ë°©ë²•' : 'ì§‘ìœ¼ë¡œ ì˜¤ì‹œëŠ” ë°©ë²•';

            let description = st.desc;
            if (searchMode === 'in') {
                // 'ì˜¤ê¸°' ëª¨ë“œì¼ ë•ŒëŠ” ê°„ë‹¨í•œ ë°˜ëŒ€ ë°©í–¥ ì„¤ëª… ì¶”ê°€
                description = `${st.name}ì—­ì—ì„œ êµ¬ë¦¬ì—­ ë°©í–¥ ì—´ì°¨ë¥¼ ì´ìš©í•˜ì„¸ìš”. <br><br> ${st.desc.replace(/ë‚´ë¦¬ì„¸ìš”/g, 'ë‚´ë¦° ë’¤ êµ¬ë¦¬ì—­ìœ¼ë¡œ ì˜¤ì„¸ìš”')}`;
            }

            content.innerHTML = `
                <div class="text-center pb-6 border-b-4 border-dashed border-gray-100">
                    <p class="text-blue-600 font-black text-2xl mb-2">${titleMsg}</p>
                    <h3 class="text-5xl font-black text-gray-800 tracking-tighter">${start} <span class="text-blue-500">â†’</span> ${end}</h3>
                </div>
                
                <div class="bg-blue-50 p-8 rounded-[2.5rem] space-y-6">
                    <div class="flex items-center">
                        <div class="w-8 h-8 rounded-full bg-red-500 mr-4"></div>
                        <p class="text-3xl font-black text-gray-700">í™˜ìŠ¹: <span class="${st.hub === 'ì—†ìŒ' ? 'text-green-600' : 'text-orange-600'}">${st.hub}</span></p>
                    </div>
                    <div class="flex items-start">
                        <div class="w-8 h-8 rounded-full bg-blue-600 mr-4 mt-2"></div>
                        <div class="flex-1">
                            <p class="text-3xl font-black text-gray-800 mb-4">ì–´ë¨¸ë‹ˆ, ìˆœì„œëŒ€ë¡œ í•˜ì„¸ìš”:</p>
                            <p class="text-3xl text-gray-700 leading-snug bg-white p-6 rounded-3xl border-2 border-blue-100 shadow-inner font-bold">
                                ${description}
                            </p>
                        </div>
                    </div>
                </div>
                
                <div class="bg-yellow-100 p-6 rounded-3xl border-4 border-yellow-300 text-center">
                    <p class="text-2xl text-yellow-900 font-black italic">"ì—­ ì•ˆì˜ ë°”ë‹¥ ìƒ‰ê¹” ì„ ì„ ë”°ë¼ê°€ë©´ ì•„ì£¼ ì‰½ìŠµë‹ˆë‹¤!"</p>
                </div>
            `;
            updateFavoriteStar();
        }

        function toggleFavorite() {
            const index = favorites.findIndex(f => f.name === currentTarget.name);
            if (index > -1) {
                favorites.splice(index, 1);
            } else {
                favorites.push(currentTarget);
            }
            localStorage.setItem('guri_mama_favs', JSON.stringify(favorites));
            updateFavoriteStar();
        }

        function updateFavoriteStar() {
            const isFav = favorites.some(f => f.name === currentTarget.name);
            const btn = document.getElementById('fav-btn');
            btn.innerText = isFav ? 'â­' : 'â˜†';
            btn.style.color = isFav ? '#f59e0b' : '#9ca3af';
        }

        function renderFavorites() {
            const container = document.getElementById('favorites-list');
            const section = document.getElementById('favorites-section');
            if (favorites.length === 0) {
                section.classList.add('hidden');
                return;
            }
            section.classList.remove('hidden');
            container.innerHTML = '';
            favorites.forEach(fav => {
                const btn = document.createElement('button');
                btn.className = "w-full bg-yellow-50 border-4 border-yellow-200 rounded-[2rem] p-6 flex items-center justify-between shadow-sm active:bg-yellow-100";
                btn.onclick = () => { searchMode = 'out'; selectStation(fav); };
                btn.innerHTML = `
                    <span class="text-3xl font-black text-gray-800">ğŸ  â†’ ${fav.name}ì—­</span>
                    <span class="text-4xl">â¡ï¸</span>
                `;
                container.appendChild(btn);
            });
        }

        function goHome() {
            document.getElementById('route-detail').classList.add('hidden');
            document.getElementById('main-menu').classList.remove('hidden');
            renderFavorites();
        }

        function toggleMap(show) {
            const modal = document.getElementById('map-modal');
            modal.style.display = show ? 'block' : 'none';
            if(show) {
                // ì–´ë¥´ì‹ ë“¤ ìœ„í•´ êµ¬ë¦¬ì—­ ê·¼ì²˜ë¡œ ìŠ¤í¬ë¡¤ ì´ˆê¸°í™” (ëŒ€ëµì  ìœ„ì¹˜)
                const img = document.getElementById('map-img');
                setTimeout(() => {
                   modal.scrollLeft = img.clientWidth * 0.7; 
                   modal.scrollTop = img.clientHeight * 0.3;
                }, 100);
            }
        }

        window.onload = renderFavorites;
    </script>
</body>
</html>
